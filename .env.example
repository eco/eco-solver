# Application
NODE_ENV=development
PORT=3000

# MongoDB
MONGODB_URI=mongodb://localhost:27017/intent-solver

# Redis
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=

# EVM Chain Configuration
# Private key shared across all EVM chains
EVM_PRIVATE_KEY=0x...

# Wallet Configuration (optional - defaults to basic wallet only)
# Basic wallet configuration
# EVM_WALLETS_BASIC_PRIVATE_KEY=0x...  # Optional: wallet-specific private key (overrides global)

# Kernel (smart account) wallet configuration
# EVM_WALLETS_KERNEL_KERNEL_ADDRESS=0x...
# EVM_WALLETS_KERNEL_MODULE_ADDRESS=0x...  # Optional
# EVM_WALLETS_KERNEL_PRIVATE_KEY=0x...  # Optional: wallet-specific private key

# Network 0: Ethereum Mainnet
EVM_NETWORKS_0_CHAIN_ID=1
EVM_NETWORKS_0_RPC_URLS_0=https://mainnet.infura.io/v3/YOUR_INFURA_KEY
# Optional: Additional RPC URLs for fallback
# EVM_NETWORKS_0_RPC_URLS_1=https://eth-mainnet.alchemyapi.io/v2/YOUR_KEY
# Optional: RPC transport options
# EVM_NETWORKS_0_RPC_OPTIONS_BATCH=true
# EVM_NETWORKS_0_RPC_OPTIONS_TIMEOUT=30000
# EVM_NETWORKS_0_RPC_OPTIONS_RETRY_COUNT=3
# Optional: WebSocket configuration
# EVM_NETWORKS_0_WS_URLS_0=wss://mainnet.infura.io/ws/v3/YOUR_INFURA_KEY
# EVM_NETWORKS_0_WS_OPTIONS_TIMEOUT=60000
# EVM_NETWORKS_0_WS_OPTIONS_KEEP_ALIVE=true
EVM_NETWORKS_0_INTENT_SOURCE_ADDRESS=0x...
EVM_NETWORKS_0_INBOX_ADDRESS=0x...
# Fee logic for Ethereum
EVM_NETWORKS_0_FEE_LOGIC_BASE_FLAT_FEE=1000000000000000  # 0.001 ETH in wei
EVM_NETWORKS_0_FEE_LOGIC_SCALAR_BPS=100  # 1% (100 basis points)
# Supported tokens (optional - if empty, all tokens are allowed)
# EVM_NETWORKS_0_TOKENS_0_ADDRESS=0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48  # USDC
# EVM_NETWORKS_0_TOKENS_0_DECIMALS=6
# EVM_NETWORKS_0_TOKENS_0_LIMIT=1000000000000  # Max 1M USDC
# EVM_NETWORKS_0_TOKENS_1_ADDRESS=0xdAC17F958D2ee523a2206206994597C13D831ec7  # USDT
# EVM_NETWORKS_0_TOKENS_1_DECIMALS=6
# EVM_NETWORKS_0_TOKENS_1_LIMIT=1000000000000  # Max 1M USDT

# Network 1: Optimism
# EVM_NETWORKS_1_CHAIN_ID=10
# EVM_NETWORKS_1_RPC_URLS_0=https://optimism-mainnet.infura.io/v3/YOUR_KEY
# EVM_NETWORKS_1_INTENT_SOURCE_ADDRESS=0x...
# EVM_NETWORKS_1_INBOX_ADDRESS=0x...
# EVM_NETWORKS_1_FEE_LOGIC_BASE_FLAT_FEE=100000000000000  # 0.0001 ETH (cheaper on L2)
# EVM_NETWORKS_1_FEE_LOGIC_SCALAR_BPS=50  # 0.5%

# Network 2: Arbitrum
# EVM_NETWORKS_2_CHAIN_ID=42161
# EVM_NETWORKS_2_RPC_URLS_0=https://arbitrum-mainnet.infura.io/v3/YOUR_KEY
# EVM_NETWORKS_2_INTENT_SOURCE_ADDRESS=0x...
# EVM_NETWORKS_2_INBOX_ADDRESS=0x...
# EVM_NETWORKS_2_FEE_LOGIC_BASE_FLAT_FEE=100000000000000  # 0.0001 ETH
# EVM_NETWORKS_2_FEE_LOGIC_SCALAR_BPS=50  # 0.5%

# Solana Configuration
SOLANA_RPC_URL=https://api.mainnet-beta.solana.com
SOLANA_WEBSOCKET_URL=wss://api.mainnet-beta.solana.com
SOLANA_SECRET_KEY=[...]
SOLANA_WALLET_ADDRESS=...
SOLANA_PROGRAM_ID=...

# Queue Configuration
QUEUE_CONCURRENCY=5
QUEUE_RETRY_ATTEMPTS=3
QUEUE_RETRY_DELAY=5000

# AWS Secrets Manager Configuration
# Set USE_AWS_SECRETS=true to enable fetching secrets from AWS
USE_AWS_SECRETS=false
AWS_REGION=us-east-1
AWS_SECRET_NAME=blockchain-intent-solver-secrets
# Optional: If not provided, will use IAM role or instance profile
# AWS_ACCESS_KEY_ID=
# AWS_SECRET_ACCESS_KEY=

# When USE_AWS_SECRETS=true, the service will fetch a JSON secret from AWS Secrets Manager
# The secret should contain the same environment variables as above, for example:
# {
#   "MONGODB_URI": "mongodb://prod-server:27017/intent-solver",
#   "REDIS_PASSWORD": "strong-password",
#   "EVM_PRIVATE_KEY": "0x...",
#   "SOLANA_SECRET_KEY": "[...]"
# }
#
# The AWS secrets will be deep merged with the base configuration, with AWS values taking precedence.
# This means you can have default values in environment variables and override only specific values from AWS.
# For example, if your .env has REDIS_HOST=localhost and AWS has REDIS_PASSWORD=secret,
# the final config will have both: host from .env and password from AWS.
#
# Configuration Schema:
# The configuration is validated using Zod schema defined in src/config/config.schema.ts
# Environment variable names are automatically derived from the schema structure:
# - Nested paths use underscores: mongodb.uri → MONGODB_URI
# - CamelCase is converted to SNAKE_CASE: evm.chainId → EVM_CHAIN_ID
# - Arrays use numeric indices: evm.networks[0].rpc.urls[0] → EVM_NETWORKS_0_RPC_URLS_0
#
# Multi-Chain Configuration:
# The EVM configuration now supports multiple networks. Each network includes:
# - RPC configuration with multiple URLs and transport options
# - WebSocket configuration (optional) for event listening
# - Contract addresses (intentSource and inbox)
# - Token whitelist with decimals and limits (optional)
# - Fee logic with base fee and scalar percentage
#
# RPC Transport Options:
# - batch: Enable batch requests (boolean or object with multicall settings)
# - timeout: Request timeout in milliseconds
# - retryCount: Number of retries for failed requests
# - retryDelay: Delay between retries in milliseconds
#
# Fee Logic:
# - baseFlatFee: Fixed fee in wei (as string for BigInt compatibility)
# - scalarBps: Variable fee in basis points (0-10000 = 0-100%)

# Fulfillment Configuration
# Default fulfillment strategy (standard, crowd-liquidity, native-intents, negative-intents, rhinestone)
FULFILLMENT_DEFAULT_STRATEGY=standard

# Strategy enablement flags
FULFILLMENT_STRATEGIES_STANDARD_ENABLED=true
FULFILLMENT_STRATEGIES_CROWD_LIQUIDITY_ENABLED=true
FULFILLMENT_STRATEGIES_NATIVE_INTENTS_ENABLED=true
FULFILLMENT_STRATEGIES_NEGATIVE_INTENTS_ENABLED=true
FULFILLMENT_STRATEGIES_RHINESTONE_ENABLED=true

# Fulfillment Validation Configuration
# Route amount limits
FULFILLMENT_VALIDATIONS_ROUTE_LIMITS_DEFAULT=10000000000000000000  # 10 ETH in wei
# Route-specific limits (optional)
# FULFILLMENT_VALIDATIONS_ROUTE_LIMITS_ROUTES_0_CHAIN_ID=1
# FULFILLMENT_VALIDATIONS_ROUTE_LIMITS_ROUTES_0_LIMIT=5000000000000000000  # 5 ETH limit for mainnet
# FULFILLMENT_VALIDATIONS_ROUTE_LIMITS_ROUTES_1_CHAIN_ID=10
# FULFILLMENT_VALIDATIONS_ROUTE_LIMITS_ROUTES_1_LIMIT=20000000000000000000  # 20 ETH limit for Optimism

# Native fee validation parameters
FULFILLMENT_VALIDATIONS_NATIVE_FEE_BASE_FEE=2000000  # 0.002 ETH in gwei
FULFILLMENT_VALIDATIONS_NATIVE_FEE_PERCENTAGE_FEE=75  # 0.75% as basis points

# Crowd liquidity fee validation parameters
FULFILLMENT_VALIDATIONS_CROWD_LIQUIDITY_FEE_BASE_FEE=500000  # 0.0005 ETH in gwei
FULFILLMENT_VALIDATIONS_CROWD_LIQUIDITY_FEE_PERCENTAGE_FEE=50  # 0.5% as basis points